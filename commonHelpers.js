import{a as y,S as w,i as f}from"./assets/vendor-f736e62a.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();async function L(t){return y.get(`https://pixabay.com/api/?${t}`).then(e=>e.data).catch(e=>{throw console.error("Error while fetching images:",e),e})}let m;function b(t){return new Promise((e,s)=>{const a=t.map(r=>new Promise((o,n)=>{const i=new Image;i.onload=()=>o(),i.onerror=d=>n(d),i.src=r.largeImageURL}));Promise.all(a).then(()=>e()).catch(r=>s(r))})}function I(t){u(),b(t).then(()=>{const e=document.querySelector("ul");if(!e)throw new Error("List element not found");e.insertAdjacentHTML("beforeend",P(t)),m?m.refresh():m=new w("ul a",{captionsData:"alt",captionDelay:250}),h()}).catch(e=>{console.error("Error while preloading images:",e)})}function p(){return new Promise(t=>{const e=document.querySelector("ul");e&&(e.innerHTML=""),t()})}function P(t){return t.map(({webformatURL:e,largeImageURL:s,tags:a,likes:r,views:o,comments:n,downloads:i})=>`
            <li>
                <a href="${s}" alt="${a}">
                    <img src="${e}" alt="${a}" width="360" />
                    <p class="image-info">
                        <span>Likes<br> ${r}</span>
                        <span>Views<br> ${o}</span>
                        <span>Comments<br> ${n}</span>
                        <span>Downloads<br> ${i}</span>
                    </p>
                </a>
            </li>
        `).join("")}function u(){const t=document.querySelector(".loader");t&&(t.style.display="block")}function h(){const t=document.querySelector(".loader");t&&(t.style.display="none")}function q(t){const e=document.querySelector(".loader");e.style.position="absolute",e.style.top=t.offsetTop+t.offsetHeight+"px",e.style.left=t.offsetLeft+"px"}function v(t){const e=document.querySelector(".loader");e.style.position="absolute",e.style.top=t.offsetTop+t.offsetHeight+"px",e.style.left=t.offsetLeft+"px"}document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("search-form"),e=document.getElementById("search-img"),s=document.querySelector(".add_img_btn"),a="43273771-9fb27172998fac0872066584a";let r=1,o="";t.addEventListener("submit",async c=>{c.preventDefault(),o=e.value.trim(),o?(r=1,p().then(()=>{v(e),u(),n()})):f.warning({title:"Warning",message:"Please enter a search query.",position:"topRight"})});async function n(){const c=e.value.trim(),g=new URLSearchParams({key:a,q:c,image_type:"photo",orientation:"horizontal",safesearch:"true",page:r,per_page:15});L(g).then(l=>{if(l.hits.length===0)throw p(),u(),new Error("Sorry, there are no images matching your search query. Please try again!");I(l.hits),l.hits.length<15&&(d(),f.warning({title:"Warning",message:"There are fewer than 15 images available.",position:"topRight"}))}).catch(l=>{e.value="",f.error({title:"Error",message:l.message,position:"topRight"})})}s.addEventListener("click",()=>{u(),q(s),i()});async function i(){u(),r++;try{await n()}catch(c){console.error(c),f.error({message:"An error occurred while fetching images. Please try again later.",position:"topRight"})}finally{h()}}function d(){s.style.display="none"}});
//# sourceMappingURL=commonHelpers.js.map
