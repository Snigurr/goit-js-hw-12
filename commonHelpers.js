import{a as L,S as I,i as h}from"./assets/vendor-f736e62a.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=n(e);fetch(e.href,r)}})();async function v(o){return L.get(`https://pixabay.com/api/?${o}`).then(t=>t.data).catch(t=>{throw console.error("Error while fetching images:",t),t})}const w=document.querySelector(".add_img_btn"),l=document.querySelector("ul"),c=document.querySelector(".loader");let p;function E(o){return Promise.all(o.map(t=>new Promise((n,a)=>{const e=new Image;e.onload=n,e.onerror=a,e.src=t.largeImageURL})))}async function P(o,t){B();try{if(await E(o),!l)throw new Error("List element not found");if(l.insertAdjacentHTML("beforeend",q(o)),p?p.refresh():p=new I("ul a",{captionsData:"alt",captionDelay:250}),b(),t!==1){const n=l.firstElementChild.getBoundingClientRect().height*2+48;setTimeout(()=>{window.scrollBy({top:n,behavior:"smooth"})},300)}o.length<15&&(m(),h.warning({title:"Warning",message:"We're sorry, but you've reached the end of search results.",position:"topRight"}))}catch(n){console.error("Error while preloading images:",n)}}async function y(){return b(),m(),new Promise(o=>{l&&(l.innerHTML=""),o()})}function q(o){return o.map(({webformatURL:t,largeImageURL:n,tags:a,likes:e,views:r,comments:i,downloads:d})=>`
            <li>
                <a href="${n}" alt="${a}">
                    <img src="${t}" alt="${a}" width="360" />
                    <div class="image-info">
                        <p><span class="info-label">Likes</span><br>${e}</p>
                        <p><span class="info-label">Views</span><br>${r}</p>
                        <p><span class="info-label">Comments</span><br>${i}</p>
                        <p><span class="info-label">Downloads</span><br>${d}</p>
                    </div>
                </a>
            </li>
        `).join("")}function B(){c&&(c.style.display="block",m())}function b(){c&&(c.style.display="none",w.style.display="block")}function m(){w.style.display="none"}function S(){c.style.position="absolute",c.style.top=l.offsetTop+l.offsetHeight+"px"}function $(o){c.style.position="absolute",c.style.top=o.offsetTop+o.offsetHeight+"px"}document.addEventListener("DOMContentLoaded",function(){const o=document.getElementById("search-form"),t=document.getElementById("search-img"),n=document.querySelector(".add_img_btn"),a="43273771-9fb27172998fac0872066584a";let e=1,r;o.addEventListener("submit",async s=>{if(s.preventDefault(),r=t.value.trim(),r){e=1;try{await y(),$(t),await i(r)}catch(f){g(f)}}else h.warning({title:"Warning",message:"Please enter a search query.",position:"topRight"})});async function i(s){t.value="";const f=new URLSearchParams({key:a,q:s,image_type:"photo",orientation:"horizontal",safesearch:"true",page:e,per_page:15});try{const u=await v(f);if(u.hits.length===0)throw y(),new Error("Sorry, there are no images matching your search query. Please try again!");P(u.hits,e)}catch(u){throw u}}n.addEventListener("click",async()=>{S();try{await d()}catch(s){g(s)}});async function d(){e++;try{await i(r)}catch(s){throw s}}function g(s){console.error(s),h.error({message:"An error occurred while fetching images. Please try again later.",position:"topRight"})}});
//# sourceMappingURL=commonHelpers.js.map
