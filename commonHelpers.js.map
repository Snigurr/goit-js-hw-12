{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function fetchImages(query) {\n    const url = `https://pixabay.com/api/?${query}`;\n    return fetch(url)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(\"Network response was not ok\");\n            }\n            return response.json();\n        })\n        .catch(error => {\n            console.error(\"Error while fetching images:\", error);\n            throw error; \n        });\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox; \n\nfunction preloadImages(images) {\n    return new Promise((resolve, reject) => {\n        const imagePromises = images.map(image => {\n            return new Promise((resolve, reject) => {\n                const img = new Image();\n                img.onload = resolve;\n                img.onerror = reject;\n                img.src = image.largeImageURL;\n            });\n        });\n\n        Promise.all(imagePromises)\n            .then(resolve)\n            .catch(reject);\n    });\n}\n\nexport function renderImages(images) {\n    showLoader();\n    clearImages()\n        .then(() => preloadImages(images))\n        .then(() => {\n            const list = document.querySelector(\"ul\");\n            if (!list) {\n                throw new Error(\"List element not found\");\n            }\n            list.insertAdjacentHTML(\"beforeend\", createMarkup(images));\n            if (!lightbox) {\n                lightbox = new SimpleLightbox(\"ul a\", {\n                    captionsData: \"alt\",\n                    captionDelay: 250,\n                });\n            } else {\n                lightbox.refresh();\n            }\n\n            hideLoader();\n        })\n        .catch(error => {\n            console.error(\"Error while preloading images:\", error);\n        });\n}\n\nexport function clearImages() {\n    return new Promise(resolve => {\n        const list = document.querySelector(\"ul\");\n        if (list) {\n            list.innerHTML = \"\";\n        }\n        resolve();\n    });\n}\n\nfunction createMarkup(arr) {\n    return arr\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <li>\n                <a href=\"${largeImageURL}\" alt=\"${tags}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" />\n                    <p class=\"image-info\">\n                        <span>Likes<br> ${likes}</span>\n                        <span>Views<br> ${views}</span>\n                        <span>Comments<br> ${comments}</span>\n                        <span>Downloads<br> ${downloads}</span>\n                    </p>\n                </a>\n            </li>\n        `)\n        .join(\"\");\n}\n\nexport function showLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.style.display = \"block\";\n    }\n}\n\nfunction hideLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.style.display = \"none\";\n    }\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderImages, showLoader, clearImages } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    const form = document.getElementById(\"search-form\");\n    const searchInput = document.getElementById(\"search-img\");\n    const API_KEY = \"43273771-9fb27172998fac0872066584a\";\n\n    form.addEventListener(\"submit\", event => {\n        event.preventDefault(); \n\n        const query = searchInput.value.trim();\n        if (query) {\n            const params = new URLSearchParams({\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\"\n            });\n            fetchImages(params)\n                .then(data => {\n                    if (data.hits.length === 0) {\n                        clearImages(); \n                        showLoader(); \n                        throw new Error(\"Sorry, there are no images matching your search query. Please try again!\");\n                    }\n                    renderImages(data.hits, \"ul.gallery\");\n                    searchInput.value = \"\";\n                })\n                .catch(error => {\n                    searchInput.value = \"\";\n                    iziToast.error({\n                        title: \"Error\",\n                        message: error.message,\n                        position: \"topRight\"\n                    });\n                });\n        } else {\n            iziToast.warning({\n                title: \"Warning\",\n                message: \"Please enter a search query.\",\n                position: \"topRight\"\n            });\n        }\n    });\n});\n\n\n\n\n"],"names":["fetchImages","query","url","response","error","lightbox","preloadImages","images","resolve","reject","imagePromises","image","img","renderImages","showLoader","clearImages","list","createMarkup","SimpleLightbox","hideLoader","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loader","form","searchInput","API_KEY","event","params","data","iziToast"],"mappings":"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"}